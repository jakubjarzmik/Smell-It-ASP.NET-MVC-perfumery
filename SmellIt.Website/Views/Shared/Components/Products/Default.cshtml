@using Microsoft.AspNetCore.Localization
@model IEnumerable<SmellIt.Application.SmellIt.Products.ProductDto>
@{
    var requestCulture = Context.Request.HttpContext.Features.Get<IRequestCultureFeature>()!;
    var currentCulture = requestCulture.RequestCulture.Culture.ToString();
    Random random = new Random();
}
@foreach (var item in Model)
{
    var price = random.Next(100, 800);
    <div class="col-md-4 col-sm-6 col-xs-6">
        <div class="product-item">
            <div class="product-thumb">
                <img class="img-responsive" src="@item.ProductImages?.FirstOrDefault()?.ImagePath" alt="@item.ProductImages?.FirstOrDefault()?.ImageAlt" />
                <div class="preview-meta">
                    <ul>
                        <li>
                            <span data-toggle="modal" data-target="#product-modal-@item.EncodedName">
                                <i class="tf-ion-android-search"></i>
                            </span>
                        </li>
                        <li>
                            <a href="#"><i class="tf-ion-android-list"></i></a>
                        </li>
                        <li>
                            <a href="#"><i class="tf-ion-android-cart"></i></a>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="product-content">

                <a href="#">
                    <h4>
                        @item.Brand?.Name<br />
                        <strong>@(currentCulture == "en-GB" ? @item.NameEn : @item.NamePl)</strong>
                    </h4>
                </a>

                <p class="price">@price zł</p>
            </div>
        </div>
    </div>

    <!-- Modal -->
    <div class="modal product-modal fade white-text" id="product-modal-@item.EncodedName">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <i class="tf-ion-close"></i>
        </button>
        <div class="modal-dialog " role="document">
            <div class="modal-content">
                <div class="modal-body">
                    <div class="row">
                        <div class="col-md-8 col-sm-6 col-xs-12">
                            <div class="modal-image">
                                <img class="img-responsive" src="@item.ProductImages?.FirstOrDefault()?.ImagePath" alt="@item.ProductImages?.FirstOrDefault()?.ImageAlt" />
                            </div>
                        </div>
                        <div class="col-md-4 col-sm-6 col-xs-12">
                            <div class="product-short-details">
                                <h2 class="product-title">@(item.Brand != null ? item.Brand.Name + " - " : "")@(currentCulture == "en-GB" ? @item.NameEn : @item.NamePl)</h2>
                                <p class="product-price">@price zł</p>
                                <p class="product-short-description">
                                    @(currentCulture == "en-GB" ? @item.DescriptionEn : @item.DescriptionPl)
                                </p>
                                <a href="cart.html" class="btn btn-main">@WebsiteTexts.GetValue("AddToCart")</a>
                                <a href="product-single.html" class="btn btn-transparent">@WebsiteTexts.GetValue("ViewProductDetails")</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
}